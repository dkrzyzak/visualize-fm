(this["webpackJsonpvisualize-fm"]=this["webpackJsonpvisualize-fm"]||[]).push([[0],{1024:function(e,t){},1025:function(e,t){},2311:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(74),c=n.n(a),o=n(2352),s=n(188),d=n(51),l=n(2357),u=n(2358),j=n(258),h=n.p+"static/media/lastfm-512.f1084b50.png",b=n(9),p=function(){return Object(b.jsxs)(l.a,{bg:"dark",variant:"dark",children:[Object(b.jsxs)(l.a.Brand,{href:"#home",children:[Object(b.jsx)("img",{alt:"",src:h,width:"30",height:"30",className:"d-inline-block align-top"})," Visualize.fm"]}),Object(b.jsxs)(u.a,{className:"mr-auto",children:[Object(b.jsx)(j.LinkContainer,{to:"/hot100",children:Object(b.jsx)(u.a.Link,{children:"Hot 100"})}),Object(b.jsx)(j.LinkContainer,{to:"/top-genres",children:Object(b.jsx)(u.a.Link,{children:"Ranking gatunk\xf3w"})})]})]})},f=n(47),g=n.n(f),O=n(76),x=n(36),m=n(2353),v=n(2354),k=n(2355),y=n(2356),S=n(160),w=n(2348),P={display:"flex",justifyContent:"center",alignItems:"center",marginTop:200},L={width:"8rem",height:"8rem",borderWidth:"0.75rem"},z=function(e){var t=e.isFetching,n=e.children;return t?Object(b.jsx)("div",{style:P,children:Object(b.jsx)(w.a,{style:L,animation:"border"})}):Object(b.jsx)(b.Fragment,{children:n})},T=n(537),C=function(e){var t=e.data;return Object(b.jsx)("div",{style:{width:1080,height:500,marginTop:30},children:Object(b.jsx)(T.a,{data:t,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"pop"},id:"dots"},{match:{id:"hip-hop"},id:"lines"}],theme:{fontSize:20}})})},R=n(2351),_=function(e){var t=e.songsList;return Object(b.jsxs)(R.a,{striped:!0,bordered:!0,hover:!0,children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"#"}),Object(b.jsx)("th",{children:"Wykonawca"}),Object(b.jsx)("th",{children:"Tytu\u0142 utworu"}),Object(b.jsx)("th",{children:"Gatunek"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.rank}),Object(b.jsx)("td",{children:e.artist}),Object(b.jsx)("td",{children:e.title}),Object(b.jsx)("td",{children:e.topGenre})]},e.rank)}))})]})},E=n(535),A=n.n(E),I=n(194),W=n.n(I),F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_PORT:"8080",REACT_APP_LASTFM_API_KEY:"d50ed4606a5fa32f90c6848b546fc8e6"}).PORT||"8080",B="http://localhost:".concat(F),D=W.a.create({baseURL:B}),G=function(e,t){var n=e.split(" Featuring")[0].split(" &")[0],r=encodeURI(n),i=encodeURI(t);return"http://ws.audioscrobbler.com/2.0/?method=track.getTopTags&api_key=".concat("d50ed4606a5fa32f90c6848b546fc8e6","&artist=").concat(r,"&track=").concat(i,"&format=json")},N=function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,i,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A()(t).format("YYYY-MM-DD"),e.next=3,D.get("/billboard100?date=".concat(n));case 3:return r=e.sent,i=r.data,e.next=7,Promise.all(i.map(function(){var e=Object(O.a)(g.a.mark((function e(t){var n,r,i,a,c,o,s,d,l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.artist,r=t.title,i=t.rank,a={artist:n,title:r,rank:i,topGenre:""},c=G(n,r),e.prev=3,e.next=6,W.a.get(c);case 6:if(d=e.sent,!(l=d.data).hasOwnProperty("error")&&(null===(o=l.toptags)||void 0===o||null===(s=o.tag)||void 0===s?void 0:s.length)){e.next=11;break}return a.topGenre="other",e.abrupt("return",a);case 11:return j=l.toptags.tag[0].name.toLowerCase(),u="hip hop"===j||"hiphop"===j||j.includes("rap")?"hip-hop":j.includes("indie")?"indie":j.includes("rock")?"rock":j.includes("metal")?"metal":j.includes("soul")?"soul":"rnb"===j?"r&b":j.split(" ").length>3?"other":isNaN(parseInt(j))?j:"other",a.topGenre=u,e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(3),a.topGenre="other",e.abrupt("return",a);case 20:case"end":return e.stop()}var j}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}()));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e.topGenre)?t[e.topGenre]+=1:t[e.topGenre]=1})),t},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,i=Object.entries(e).map((function(e){var t=Object(x.a)(e,2),n=t[0];return{id:n,label:n,value:t[1]}})).filter((function(e){return!(e.value<n)||(r++,!1)}));if(r>0){var a=i.findIndex((function(e){return"other"===e.id}));i[a].value+=r}return i.sort((function(e,t){return t.value-e.value})),t?i:i.filter((function(e){return"other"!==e.id}))},J=function(e){var t=JSON.parse(JSON.stringify(e)),n=new Set;e.forEach((function(e){e.genres.length=5,e.genres.forEach((function(e){return n.add(e.genre)}))})),e.forEach((function(e){n.forEach((function(n){var r,i,a;-1===e.genres.findIndex((function(e){return e.genre===n}))&&e.genres.push({genre:n,count:null!==(r=null===(i=t.find((function(t){return t.year===e.year})))||void 0===i||null===(a=i.genres.find((function(e){return e.genre===n})))||void 0===a?void 0:a.count)&&void 0!==r?r:0})})),e.genres.sort((function(e,t){return t.count-e.count}))}));var r=Array.from(n).map((function(t){var n=e.map((function(e){return{x:e.year,y:e.genres.findIndex((function(e){return e.genre===t}))+1}}));return{id:t,data:n}}));return console.log(e),r},U=function(){var e=Object(r.useState)(new Date),t=Object(x.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(!1),c=Object(x.a)(a,2),s=c[0],d=c[1],l=Object(r.useState)([]),u=Object(x.a)(l,2),j=u[0],h=u[1],p=Object(r.useState)(!1),f=Object(x.a)(p,2),w=f[0],P=f[1],L=function(){var e=Object(O.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,N(n);case 4:t=e.sent,h(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,d(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(o.a,{children:[Object(b.jsxs)(m.a,{style:{padding:"3rem 2rem"},children:[Object(b.jsx)("h1",{children:"Billboard Hot 100"}),Object(b.jsx)("h6",{children:"Lista Billboard Hot 100 dla wybranego tygodnia oraz wykres popularno\u015bci gatunk\xf3w"})]}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(k.a,{xs:5,children:Object(b.jsx)(S.DatePicker,{onChange:function(e){return i(e)},value:n,label:"Podaj dat\u0119"})}),Object(b.jsx)(k.a,{xs:3,style:{display:"flex",alignItems:"flex-end"},children:Object(b.jsx)(S.CheckboxToggle,{label:'Traktuj "other" jako gatunek',value:w,onChange:function(){P((function(e){return!e}))}})}),Object(b.jsx)(k.a,{xs:4,children:Object(b.jsx)(y.a,{style:{width:200,padding:"10px inherit"},className:"mt-4",onClick:L,children:"Pobierz list\u0119!"})})]}),Object(b.jsx)(z,{isFetching:s,children:j.length>0&&Object(b.jsxs)("div",{children:[Object(b.jsx)(C,{data:Y(H(j),w,2)}),Object(b.jsx)(_,{songsList:j})]})})]})},K=n(27),M=n(536),V=function(e){var t=e.data;return Object(b.jsx)("div",{style:{width:1200,height:500,marginTop:50,marginBottom:200,marginLeft:-30},children:Object(b.jsx)(M.a,Object(K.a)(Object(K.a)({data:t,margin:{top:40,right:200,bottom:40,left:60},colors:{scheme:"dark2"}},{lineWidth:4,activeLineWidth:6,inactiveLineWidth:2}),{},{inactiveOpacity:.15,pointSize:10,activePointSize:16,inactivePointSize:0,pointColor:{theme:"background"},pointBorderWidth:3,activePointBorderWidth:3,pointBorderColor:{from:"serie.color"},theme:{fontSize:20},axisTop:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:-36},axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:6,tickPadding:5,tickRotation:0,legend:"ranking",legendPosition:"middle",legendOffset:-40}}))})},q=function(){var e=Object(r.useState)(1985),t=Object(x.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(!1),c=Object(x.a)(a,2),s=c[0],d=c[1],l=Object(r.useState)([]),u=Object(x.a)(l,2),j=u[0],h=u[1],p=function(){var e=Object(O.a)(g.a.mark((function e(){var t,r,i,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,D.get("/topGenresPerYear/".concat(n));case 4:t=e.sent,r=t.data,i=r.map((function(e){var t=e.genres;return{year:e.year,genres:t.map((function(e){return{count:e.count,genre:e.genre}}))}})),a=J(i),h(a),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",[]);case 14:return e.prev=14,d(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(o.a,{children:[Object(b.jsxs)(m.a,{style:{padding:"3rem 2rem"},children:[Object(b.jsx)("h1",{children:"Jak zmienia\u0142y si\u0119 najpopularniejsze gatunki?"}),Object(b.jsx)("h6",{children:"Wybierz rok, i zobacz jak preferencje s\u0142uchaczy zmienia\u0142y si\u0119 na przestrzeni 5 lat od wybranego roku"})]}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(k.a,{xs:9,children:Object(b.jsx)(S.Slider,{label:"Wybierz rok pocz\u0105tkowy",min:1960,max:2016,step:1,value:n,onChange:function(e){i(+e.target.value)}})}),Object(b.jsx)(k.a,{xs:3,style:{display:"flex",alignItems:"flex-end"},children:Object(b.jsx)(y.a,{style:{width:200,padding:"10px inherit"},onClick:p,children:"Pobierz dane!"})})]})]}),Object(b.jsx)(z,{isFetching:s,children:j.length>0&&Object(b.jsx)("div",{children:Object(b.jsx)(V,{data:j})})})]})};var Q=function(){return Object(b.jsx)(s.BrowserRouter,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(p,{}),Object(b.jsxs)(d.g,{children:[Object(b.jsx)(d.d,{exact:!0,path:"/",children:Object(b.jsx)(d.c,{to:"/hot100"})}),Object(b.jsx)(d.d,{path:"/hot100",children:Object(b.jsx)(U,{})}),Object(b.jsx)(d.d,{path:"/top-genres",children:Object(b.jsx)(q,{})})]})]})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2360)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root")),X()},401:function(e,t){}},[[2311,1,2]]]);
//# sourceMappingURL=main.901178d7.chunk.js.map